/**
 * federated LF reactor that connects three independently defined federates:
 *
 * LlmA federate: inference using Llama-2-7B model.
 * LlmB federate: inference using Llama-2-70B model.
 * Judge federate: Reads user queries, measures timing, and decides the winner.
 *  This federate reactor composes the LLM reactors and Judge into one coordinated system.
 *  All timing and winner-determination logic reside in the sub-reactors in "llm_base_class_federate.lf"
 * @author Deeksha Prahlad and Hokeun Kim
 */

target Python { 
  keepalive: true, 
  coordination: centralized,
  DNET: false ,
  coordination-options: {
    advance-message-interval: 10 msec
  }
}


import LlmA, LlmB, Judge from "llm_base_class_federate.lf"

// TODO: Change the following `localhost` to the network address of the RTI.
federated reactor llm_game_federated at localhost {
  j    = new Judge()
  llma = new LlmA()
  llmb = new LlmB()

  j.ask -> llma.user_in
  j.ask -> llmb.user_in

  llma.answer_text -> j.llma_text
  llma.answer_ms   -> j.llma_ms

  llmb.answer_text -> j.llmb_text
  llmb.answer_ms   -> j.llmb_ms

  llma.ready_out -> j.ready_a
  llmb.ready_out -> j.ready_b
}
