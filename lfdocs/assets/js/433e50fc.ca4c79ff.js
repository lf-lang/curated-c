"use strict";(globalThis.webpackChunkdocusaurus_classic_typescript=globalThis.webpackChunkdocusaurus_classic_typescript||[]).push([[55918],{16920:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/project_configuration-69a8d2dee72bea4e34b3d5673f9c2193.png"},20946:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/product_selection-6cf47a6dc1f93a78eb22baf1fcf41c21.png"},21908:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/project_selection-68abc13423fcaf075fc282f2bf5c74d5.png"},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var i=t(96540);const o={},s=i.createContext(o);function r(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(s.Provider,{value:n},e.children)}},31629:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/run_configurations-5ee3f059502e141ef2269c93170de654.png"},45585:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>d,frontMatter:()=>s,metadata:()=>a,toc:()=>c});var i=t(74848),o=t(28453);const s={title:"Developer Eclipse Setup",description:"Developer Eclipse setup with Oomph."},r=void 0,a={id:"developer/developer-eclipse-setup-with-oomph",title:"Developer Eclipse Setup",description:"Developer Eclipse setup with Oomph.",source:"@site/versioned_docs/version-0.7.0/developer/developer-eclipse-setup-with-oomph.mdx",sourceDirName:"developer",slug:"/developer/developer-eclipse-setup-with-oomph",permalink:"/docs/0.7.0/developer/developer-eclipse-setup-with-oomph",draft:!1,unlisted:!1,editUrl:"https://github.com/lf-lang/lf-lang.github.io/tree/master/versioned_docs/version-0.7.0/developer/developer-eclipse-setup-with-oomph.mdx",tags:[],version:"0.7.0",frontMatter:{title:"Developer Eclipse Setup",description:"Developer Eclipse setup with Oomph."},sidebar:"handbookSidebar",previous:{title:"Contributing",permalink:"/docs/0.7.0/developer/contributing"},next:{title:"Developer IntelliJ Setup",permalink:"/docs/0.7.0/developer/developer-intellij-setup"}},l={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Oomph Setup",id:"oomph-setup",level:2},{value:"Using the Lingua Franca IDE",id:"using-the-lingua-franca-ide",level:3},{value:"Working on the Lingua-Franca Compiler",id:"working-on-the-lingua-franca-compiler",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2}];function h(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Eclipse does not currently support Kotlin, the language used for some of the target code generators. If you plan to develop Kotlin code, we recommend using ",(0,i.jsx)(n.a,{href:"/docs/0.7.0/developer/developer-intellij-setup",children:"IntelliJ"})," instead of Eclipse."]})}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Java 17 (",(0,i.jsx)(n.a,{href:"https://www.oracle.com/java/technologies/downloads/",children:"download from Oracle"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:["Each target language may have additional requirements. See the ",(0,i.jsx)(n.a,{href:"/docs/0.7.0/reference/target-language-details#requirements",children:"Target Language Details"})," page and select your target language."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"oomph-setup",children:"Oomph Setup"}),"\n",(0,i.jsx)(n.p,{children:"The Eclipse setup with Oomph allows to automatically create a fully configured Eclipse IDE for the development of Lingua Franca. Note that we recommend installing a new instance of Eclipse even if you already have one for other purposes. There is no problem having multiple Eclipse installations on the same machine, and separate installations help prevent cross-project problems."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["If you have previously installed Eclipse and you want to start fresh, then remove or move a hidden directory called ",(0,i.jsx)(n.code,{children:".p2"})," in your home directory. I do this:"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"mv ~/.p2 ~/.p2.bak\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Go to the ",(0,i.jsx)(n.a,{href:"https://www.eclipse.org/downloads/index.php",children:"Eclipse download site"})," (",(0,i.jsx)(n.a,{href:"https://www.eclipse.org/downloads/index.php",children:"https://www.eclipse.org/downloads/index.php"}),") and download the Eclipse Installer for your platform. The site does not advertise that it ships the Oomph Eclipse Installer but downloading Eclipse with the orange download button will give you the installer.",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"You can skip this step if you already have the installer available on your system."})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Starting the installer for the first time will open a window that looks like the following (",(0,i.jsx)(n.strong,{children:"if you have previously followed these steps, skip to step 4"}),"):",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.img,{src:t(61114).A+"",width:"740",height:"760"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:'Click the Hamburger button at the top right corner and switch to "Advanced Mode".'}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:['Oomph now wants you to select the base Eclipse distribution for your development. We recommend to use "Eclipse IDE for Java and DSL Developers". As product version we recommend to use "Latest Release (...)". ',(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"Important"}),": Lingua Franca tools require Java 17. Under Java VM, please select Java 17.",(0,i.jsx)(n.br,{}),"\n","Then press Next to continue with the project section.",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.img,{src:t(20946).A+"",width:"881",height:"773"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Next, we need to register the Lingua Franca specific setup in Oomph ",(0,i.jsx)(n.strong,{children:"(only the first time you use the installer)"}),'. Click the green Plus button at the top right corner. Select "GitHub Projects" as catalog and paste the following URL into the "Resource URI" field:\n',(0,i.jsx)(n.code,{children:"https://raw.githubusercontent.com/icyphy/lingua-franca/master/oomph/LinguaFranca.setup"}),".\nThen press OK.\nNOTE: to check out another branch instead, adjust the URL above accordingly. For instance, in order to install the setup from ",(0,i.jsx)(n.code,{children:"foo-bar"})," branch, change the URL to ",(0,i.jsx)(n.code,{children:"https://raw.githubusercontent.com/icyphy/lingua-franca/foo-bar/oomph/LinguaFranca.setup"}),". Also, in the subsequent screen in the wizard, select the particular branch of interest instead of default, which is ",(0,i.jsx)(n.code,{children:"master"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:['Now Oomph lists the Lingua Franca setup in the "<User>" directory of the "GitHub Projects" catalog. Check the Lingua Franca entry. A new entry for Lingua Franca will appear in the table at the bottom of the window. Select Lingua Franca and click Next.',(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.img,{src:t(21908).A+"",width:"814",height:"570"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:'Now you can further configure where and how your development Eclipse should be created. Check "Show all variables" to enable all possible configuration options. You can hover over the field labels to get a more detailed explanation of their effects.'}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'If you already have cloned the LF repository and you want Eclipse to use this location instead of cloning it into the new IDE environment, you should adjust the "Git clone location rule".'}),"\n",(0,i.jsxs)(n.li,{children:['Preferably, you have a GitHub account with an SSH key uploaded to GitHub. Otherwise, you should adjust the "Lingua Franca GitHub repository" entry to use the https option in the drop-down menu. See ',(0,i.jsx)(n.a,{href:"https://docs.github.com/en/authentication/connecting-to-github-with-ssh/adding-a-new-ssh-key-to-your-github-account",children:"adding an SSH key to your GitHub account"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:['If the "JRE 17 location" is empty, you need to install and/or locate a JDK that has at least version 17.\n',(0,i.jsx)(n.img,{src:t(16920).A+"",width:"814",height:"570"})]}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"9",children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Click Next to get a summary of what will happen during installation. Click Finish to start."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Once the basic installation is complete, your new Eclipse will start. If it fails to clone the GitHub repository, then you should use the back button in the Oomph dialog and change the way you are accessing the repo (ssh or https). See above. ",(0,i.jsx)(n.br,{}),"\n","The setup may also fail to clone the repository via SHH if Eclipse cannot find the private ssh key that matches the public key you uploaded to GitHub. You can configure the location of your private key in Eclipse as follows. In the Eclipse IDE, click the menu entry Window -> Preferences (on Mac Apple-Menu -> Preferences) and navigate to General -> Network Connections -> SSH2 in the tree view on the left and configure the SSH home directory and key names according to your computer. After the repo has been cloned, you can safely close the initial Oomph dialog (if not dismissed automatically). You will see a Welcome page that you can close."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:'In the new Eclipse, it may automatically start building the project, or it may pop up an "Eclipse Updater" dialog. If neither happens, you can click the button with the yellow and blue cycling arrows in the status bar at the bottom. Oomph will perform various operations to configure the Eclipse environment, including the initial code generation for the LF language. This may take some time. Wait until the setup is finished.'}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["If you get compile errors, make sure Eclipse is using Java 17. If you skipped the first step above (removing your ",(0,i.jsx)(n.code,{children:"~/.p2"})," directory), then you may have legacy configuration information that causes Eclipse to mysteriously use an earlier version of Java. Lingua Franca requires Java 17, and will get compiler errors if it uses an earlier version. To fix this, go to the menu ",(0,i.jsx)(n.code,{children:"Project->Properties"})," and select ",(0,i.jsx)(n.code,{children:"Java Build Path"}),". Remove the entry for ",(0,i.jsx)(n.code,{children:"JRE System Library [JRE for JavaSE-8]"})," (or similar). Choose ",(0,i.jsx)(n.code,{children:"Add Library"})," on the right, and choose ",(0,i.jsx)(n.code,{children:"JRE System Library"}),". You should now be able to choose ",(0,i.jsx)(n.code,{children:"Workspace default JRE (JRE for JavaSE-17)"}),". A resulting rebuild should then compile correctly."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:'When the setup dialog is closed, your LF development IDE is ready. Probably, Eclipse is still compiling some code but when this is finished as well, all error markers on the project should have disappeared. Now, you can start a runtime Eclipse to test the actual Lingua Franca end-user IDE. In the toolbar, click on the small arrow next to the green Start button. There may already be an entry named "Launch Runtime Eclipse", but probably not. To create it, click on "Run Configurations...". Expand the "Eclipse Application" entry, select "Launch Runtime Eclipse", as follows:'}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:t(31629).A+"",width:"1068",height:"705"})}),"\n",(0,i.jsx)(n.p,{children:'Make sure that the Execution Environment shows a version of Java that is at least Java 17. The click on "Run" at the bottom.'}),"\n",(0,i.jsxs)(n.ol,{start:"14",children:["\n",(0,i.jsx)(n.li,{children:'A new Eclipse starts where you can write LF programs and also get a diagram representation (but you fist need to open the diagram view by clicking on Window -> Show View -> Other and selecting Diagram in the "KIELER Lightweight Diagrams" folder). You can close the welcome window in the new Eclipse and proceed to creating a new project, as below.'}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"using-the-lingua-franca-ide",children:"Using the Lingua Franca IDE"}),"\n",(0,i.jsx)(n.p,{children:"Start the Lingua Franca IDE, create a project, and create your first LF program:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Select File->New->Project (a General Project is adequate)."}),"\n",(0,i.jsx)(n.li,{children:'Give the project a name, like "test".'}),"\n",(0,i.jsxs)(n.li,{children:["You may want to uncheck ",(0,i.jsx)(n.code,{children:"Use default location"})," and specify a location that you can remember."]}),"\n",(0,i.jsx)(n.li,{children:"Close the Eclipse welcome window, if it is open. It obscures the project."}),"\n",(0,i.jsx)(n.li,{children:"Right click on the project name and select New->File."}),"\n",(0,i.jsx)(n.li,{children:'Give the new a name like "HelloWorld.lf" (with .lf extension).'}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"IMPORTANT:"})," A dialog appears: Do you want to convert 'test' to an Xtext Project? Say YES."]}),"\n",(0,i.jsx)(n.li,{children:"Start typing in Lingua-Franca! Try this:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lf",children:'  target C;\n  main reactor HelloWorld {\n      timer t;\n      reaction(t) {=\n          printf("Hello World.\\n");\n      =}\n  }\n'})}),"\n",(0,i.jsxs)(n.p,{children:["When you save, generated code goes into your project directory, e.g. ",(0,i.jsx)(n.code,{children:"/Users/yourname/test"}),". That directory now has two directories inside it, ",(0,i.jsx)(n.code,{children:"src-gen"})," and ",(0,i.jsx)(n.code,{children:"bin"}),". The first contains the generated C code and the second contains the resulting executable program. Run the program:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"    cd ~/lingua-franca-master/runtime-EclipseXtext/test\n    bin/HelloWorld\n"})}),"\n",(0,i.jsx)(n.p,{children:"The above directory assumes you chose default locations for everything. This should produce output that looks something like this:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"---- Start execution at time Sun Mar 28 10:19:24 2021\n---- plus 769212000 nanoseconds.\nHello World.\n---- Elapsed logical time (in nsec): 0\n---- Elapsed physical time (in nsec): 562,000\n"})}),"\n",(0,i.jsx)(n.p,{children:'This should print "Hello World".'}),"\n",(0,i.jsxs)(n.p,{children:["We strongly recommend browsing the ",(0,i.jsx)(n.a,{href:"/docs/0.7.0/developer/regression-tests",children:"itegration tests"}),", which provide a concise overview of the capabilities of Lingua Franca."]}),"\n",(0,i.jsx)(n.h2,{id:"working-on-the-lingua-franca-compiler",children:"Working on the Lingua-Franca Compiler"}),"\n",(0,i.jsxs)(n.p,{children:["The source code for the compiler is in the package ",(0,i.jsx)(n.code,{children:"org.icyphy.linguafranca"}),"."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The grammar is in ",(0,i.jsx)(n.code,{children:"src/org.icyphy/LinguaFranca.xtext"})]}),"\n",(0,i.jsxs)(n.li,{children:["The code generator for the C target is in ",(0,i.jsx)(n.code,{children:"src/org.icyphy.generator/CGenerator.xtend"})]}),"\n",(0,i.jsxs)(n.li,{children:["The code generator for the TypeScript target is in ",(0,i.jsx)(n.code,{children:"src/org.icyphy.generator/TypeScriptGenerator.xtend"})]}),"\n",(0,i.jsxs)(n.li,{children:["The code generator for the C++ target is in ",(0,i.jsx)(n.code,{children:"src/org.icyphy.generator/CppGenerator.xtend"})]}),"\n",(0,i.jsxs)(n.li,{children:["The code generator for the Python target is in ",(0,i.jsx)(n.code,{children:"src/org.icyphy.generator/PythonGenerator.xtend"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["GitHub uses port ",(0,i.jsx)(n.code,{children:"443"})," for its ssh connections. In some systems, the default expected port by ",(0,i.jsx)(n.code,{children:"git"})," can be 22, causing a timeout when cloning the repo. This can be fixed by adding the following to ",(0,i.jsx)(n.code,{children:"~/.ssh/config"}),":","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Host github.com\n Hostname ssh.github.com\n Port 443\n"})}),"\n"]}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},61114:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/simple_view-d422d70f2e2861d94129f5c7f0abb5ec.png"}}]);