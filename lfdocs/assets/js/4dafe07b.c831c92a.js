"use strict";(globalThis.webpackChunkdocusaurus_classic_typescript=globalThis.webpackChunkdocusaurus_classic_typescript||[]).push([[95166],{25377:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>o,contentTitle:()=>l,default:()=>x,frontMatter:()=>t,metadata:()=>c,toc:()=>d});var r=n(74848),i=n(28453),a=n(31848);const t={title:"Expressions",description:"Expressions in Lingua Franca."},l=void 0,c={id:"reference/expressions",title:"Expressions",description:"Expressions in Lingua Franca.",source:"@site/versioned_docs/version-0.11.0/reference/expressions.mdx",sourceDirName:"reference",slug:"/reference/expressions",permalink:"/docs/reference/expressions",draft:!1,unlisted:!1,editUrl:"https://github.com/lf-lang/lf-lang.github.io/tree/master/versioned_docs/version-0.11.0/reference/expressions.mdx",tags:[],version:"0.11.0",frontMatter:{title:"Expressions",description:"Expressions in Lingua Franca."},sidebar:"handbookSidebar",previous:{title:"Docker Support",permalink:"/docs/reference/docker-support"},next:{title:"Target Language Details",permalink:"/docs/reference/target-language-details"}},o={},d=[{value:"Basic expressions",id:"basic-expressions",level:2},{value:"Collections",id:"collections",level:2}];function h(e){const s={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.Gv,{c:!0,cpp:!0,py:!0,ts:!0,rs:!0}),"\n",(0,r.jsxs)(s.p,{children:["A subset of LF syntax is used to write ",(0,r.jsx)(s.em,{children:"expressions"}),", which represent values in the target language. Expressions are used to initialize state variable and to give values to parameters. Arbitrary expressions in the target language can always be given within delimiters ",(0,r.jsx)(s.code,{children:"{= ... =}"}),", but simple forms do not require the delimiters. These simple forms are documented here."]}),"\n",(0,r.jsx)(s.h2,{id:"basic-expressions",children:"Basic expressions"}),"\n",(0,r.jsx)(s.p,{children:"The most basic expression forms, which are supported by all target languages, are the following:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Literals:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Numeric literals, e.g. ",(0,r.jsx)(s.code,{children:"1"}),", ",(0,r.jsx)(s.code,{children:"-120"}),", ",(0,r.jsx)(s.code,{children:"1.5"}),", ",(0,r.jsx)(s.code,{children:"3.14e10"}),". Note that the sign, if any, is part of the literal and must not be separated by whitespace."]}),"\n",(0,r.jsxs)(s.li,{children:["String literals, e.g. ",(0,r.jsx)(s.code,{children:'"abcd"'}),". String literals always use double-quotes, even in languages which support other forms (like Python)."]}),"\n",(0,r.jsxs)(s.li,{children:["Character literals. e.g. ",(0,r.jsx)(s.code,{children:"'a'"}),". Single-quoted literals must be exactly one character long --even in Python."]}),"\n",(0,r.jsxs)(s.li,{children:["Boolean literals: ",(0,r.jsx)(s.code,{children:"true"}),", ",(0,r.jsx)(s.code,{children:"false"}),", ",(0,r.jsx)(s.code,{children:"True"}),", ",(0,r.jsx)(s.code,{children:"False"}),". The latter two are there for Python."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Parameter references, which are simple identifiers (e.g. ",(0,r.jsx)(s.code,{children:"foo"}),"). Any identifier in expression position must refer to a parameter of the enclosing reactor."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Time values, e.g. ",(0,r.jsx)(s.code,{children:"1 msec"})," or ",(0,r.jsx)(s.code,{children:"10 seconds"}),". The syntax of time values is ",(0,r.jsx)(s.code,{children:"integer time_unit"}),", where ",(0,r.jsx)(s.code,{children:"time_unit"})," is one of the following:"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"nsec"})," or ",(0,r.jsx)(s.strong,{children:"ns"}),": nanoseconds"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"usec"})," or ",(0,r.jsx)(s.strong,{children:"us"}),": microseconds"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"msec"})," or ",(0,r.jsx)(s.strong,{children:"ms"}),": milliseconds"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"sec"}),", ",(0,r.jsx)(s.strong,{children:"second"}),", or ",(0,r.jsx)(s.strong,{children:"s"}),": seconds"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"minute"})," or ",(0,r.jsx)(s.strong,{children:"min"}),": 60 seconds"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"hour"}),": 60 minutes"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"day"}),": 24 hours"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"week"}),": 7 days"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["Each of these units also support a plural version (e.g., ",(0,r.jsx)(s.code,{children:"nsecs"}),", ",(0,r.jsx)(s.code,{children:"minutes"}),", and ",(0,r.jsx)(s.code,{children:"days"}),"), which means the same thing."]}),"\n",(0,r.jsxs)(s.p,{children:["The time value ",(0,r.jsx)(s.code,{children:"0"})," need not be given a unit, but for all other values, the unit is required."]}),"\n",(0,r.jsxs)(s.p,{children:["Time values are compatible with the ",(0,r.jsx)(s.code,{children:"time"})," type."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Escaped target-language expression, e.g. ",(0,r.jsx)(s.code,{children:"{= foo() =}"}),". This syntax is used to write any expression which does not fall into one of the other forms described here. The contents are not parsed and are used verbatim in the generated file."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(a.Sk,{children:[(0,r.jsxs)(a.lr,{c:!0,children:[(0,r.jsx)(s.p,{children:"For instance, to have a 2-dimensional array as a parameter in C:"}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-lf-c",children:"reactor Foo(param:{= int[][] =}({= { {1}, {2} } =})) {\n  ...\n}\n"})}),(0,r.jsxs)(s.p,{children:["Both ",(0,r.jsx)(s.code,{children:"int[][]"})," and ",(0,r.jsx)(s.code,{children:"{ {1}, {2} }"})," are C fragments here, not LF."]})]}),(0,r.jsxs)(a.lr,{py:!0,children:[(0,r.jsx)(s.p,{children:"For instance, to assign a 2-dimensional list as an initial value to a parameter\nin the Python target:"}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-lf-py",children:"reactor Foo(param({= ((1, 2, 3), (4, 5, 6)) =})) {\n  ...\n}\n"})})]})]}),"\n",(0,r.jsx)(s.h2,{id:"collections",children:"Collections"}),"\n",(0,r.jsx)(a.Ae,{c:!0,cpp:!0,ts:!0,rs:!0,children:(0,r.jsxs)(s.p,{children:["To avoid the awkwardness of using the code delimiters ",(0,r.jsx)(s.code,{children:"{= ... =}"}),", Lingua Franca supports initialization of simple arrays and similar structures. The interpretation is slightly different in each target language."]})}),"\n",(0,r.jsxs)(a.Sk,{children:[(0,r.jsxs)(a.lr,{c:!0,children:[(0,r.jsx)(s.p,{children:"In C, a parameter or state may be given an array value as in the following example:"}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-lf-c",children:'reactor Foo(param: double[] = {0.0, 1.0, 2.0}) {\n  reaction(startup) {=\n    printf("%f %f %f\\n", self->param[0], self->param[1], self->param[2]);\n  =}\n}\n'})}),(0,r.jsxs)(s.p,{children:["The parameter named ",(0,r.jsx)(s.code,{children:"param"})," will become an array of length three. When instantiating this reactor, the default parameter value can be overridden using a similar syntax:"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-lf-c",children:"main reactor {\n  f = new Foo(param = {3.3, 4.4, 5.5});\n}\n"})}),(0,r.jsxs)(s.p,{children:["See the ",(0,r.jsx)(s.a,{href:"/docs/reference/target-language-details",children:"Target Language Details"})," for details and alternative syntaxes."]})]}),(0,r.jsxs)(a.lr,{cpp:!0,children:[(0,r.jsx)(s.p,{children:"In C++, initial values for a parameter or state can be used to pass arguments to a constructor, as in the following example:"}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-lf-cpp",children:"  state x: int[](2, 0);\n"})}),(0,r.jsxs)(s.p,{children:["Here, the type ",(0,r.jsx)(s.code,{children:"int[]"})," is translated by the code generator into ",(0,r.jsx)(s.code,{children:"std::vector"})," and the ",(0,r.jsx)(s.code,{children:"(2, 0)"})," to constructor arguments, as in ",(0,r.jsx)(s.code,{children:"new std::vector(2,0)"}),", which creates a vector of length 2 filled with elements with value 0. See the ",(0,r.jsx)(s.a,{href:"/docs/reference/target-language-details",children:"Target Language Details"})," for details and alternative syntaxes."]})]}),(0,r.jsxs)(a.lr,{py:!0,children:[(0,r.jsx)(s.p,{children:"In Python, a parameter or state variable may be assigned a list expression as its initial value, as in the following example:"}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-lf-py",children:"reactor Foo(param = {= [1, 2, 3] =}) {\n  state x = {= [1, 2, 3] =}\n  ...\n}\n"})}),(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"param"})," parameter and ",(0,r.jsx)(s.code,{children:"x"})," state variable become Python lists.\nTheir elements may be accessed as arrays, for example ",(0,r.jsx)(s.code,{children:"self.x[i]"}),", where ",(0,r.jsx)(s.code,{children:"i"})," is an array index."]}),(0,r.jsx)(s.p,{children:"The parameter may be overridden with a different list at instantiation:"}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-lf-py",children:"main reactor {\n  f = new Foo(param = {= [3, 4, 5, 6]} )\n}\n"})}),(0,r.jsxs)(s.p,{children:["See the ",(0,r.jsx)(s.a,{href:"/docs/reference/target-language-details",children:"Target Language Details"})," for more details."]})]}),(0,r.jsxs)(a.lr,{ts:!0,children:[(0,r.jsx)(s.p,{children:"In TypeScript, a parameter or state variable may be assigned an array expression as its initial value, as in the following example:"}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-lf-ts",children:"reactor Foo(param:{=Array<number>=}({= [1, 2, 3] =})) {\n  state x:{=Array<number>=} = {= [0.1, 0.2, 0.3] =}\n}\n"})}),(0,r.jsxs)(s.p,{children:["See the ",(0,r.jsx)(s.a,{href:"/docs/reference/target-language-details",children:"TypeScript reactor documentation"})," for details and alternative syntaxes."]})]}),(0,r.jsx)(a.lr,{rs:!0,children:(0,r.jsx)(s.admonition,{type:"danger",children:(0,r.jsx)(s.p,{children:"FIXME: Rust"})})})]})]})}function x(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>t,x:()=>l});var r=n(96540);const i={},a=r.createContext(i);function t(e){const s=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(a.Provider,{value:s},e.children)}}}]);