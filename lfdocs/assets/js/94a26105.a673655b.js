"use strict";(globalThis.webpackChunkdocusaurus_classic_typescript=globalThis.webpackChunkdocusaurus_classic_typescript||[]).push([[40099],{23403:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>i,default:()=>g,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var o=t(74848),d=t(28453);const r={title:"Debugging Generated Code",description:"Using VS Code to debug generated code."},i=void 0,s={id:"developer/debugging-generated-code",title:"Debugging Generated Code",description:"Using VS Code to debug generated code.",source:"@site/versioned_docs/version-0.11.0/developer/debugging-generated-code.mdx",sourceDirName:"developer",slug:"/developer/debugging-generated-code",permalink:"/docs/developer/debugging-generated-code",draft:!1,unlisted:!1,editUrl:"https://github.com/lf-lang/lf-lang.github.io/tree/master/versioned_docs/version-0.11.0/developer/debugging-generated-code.mdx",tags:[],version:"0.11.0",frontMatter:{title:"Debugging Generated Code",description:"Using VS Code to debug generated code."},sidebar:"handbookSidebar",previous:{title:"Building from Source Code",permalink:"/docs/developer/downloading-and-building"},next:{title:"On-target Development",permalink:"/docs/developer/on-target-development"}},a={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Getting Started",id:"getting-started",level:2},{value:"Running and Debugging Generated Code",id:"running-and-debugging-generated-code",level:2},{value:"Debugging Federated Programs",id:"debugging-federated-programs",level:2},{value:"Adding Arguments",id:"adding-arguments",level:3}];function l(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",...(0,d.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,o.jsxs)(n.p,{children:["This page assumes you are using Visual Studio Code (VS Code).\nLingua Franca files are compiled using CMake, so you should install Microsoft's\n",(0,o.jsx)(n.a,{href:"https://marketplace.visualstudio.com/items?itemName=ms-vscode.cmake-tools",children:"CMake Tools extension"}),".\nThe instructions here will work with the C, Cpp, and CCpp targets.\nThey may work with other targets as well, but will probably require additional VS Code extensions."]}),"\n",(0,o.jsx)(n.h2,{id:"getting-started",children:"Getting Started"}),"\n",(0,o.jsxs)(n.p,{children:["When you run ",(0,o.jsx)(n.code,{children:"lfc"})," to compile a Lingua Franca program, the generated code goes into a directory\ncalled ",(0,o.jsx)(n.code,{children:"src-gen"})," that will be created next to the ",(0,o.jsx)(n.code,{children:"src"})," directory that contains your ",(0,o.jsx)(n.code,{children:".lf"})," files\n(see ",(0,o.jsx)(n.a,{href:"/docs/writing-reactors/a-first-reactor#structure-of-an-lf-project",children:"Structure of an LF project"}),").\nYou can directly edit, compile, run, and debug the generated code using VS Code.\nTo do this, start VS Code in the directory where the generated code is.\nFor example, if your program is ",(0,o.jsx)(n.code,{children:"src/Foo.lf"}),", the following steps will get you into the generated code:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"   lfc src/Foo.lf\n   cd src-gen/Foo\n   code .\n"})}),"\n",(0,o.jsxs)(n.p,{children:["The structure of the generated code depends on the target you are using, but in all cases, the project includes\neverything needed to build and run the code.\nYou can use VS Code's convenient Search functionality to find your reaction bodies and set breakpoints.\nYou can also modify the code directly and recompile it using CMake, but be careful to save any changes that you\nwant to preserve somewhere else because the next time you run ",(0,o.jsx)(n.code,{children:"lfc"}),", the ",(0,o.jsx)(n.code,{children:"src-gen"})," directory will be overwritten."]}),"\n",(0,o.jsx)(n.h2,{id:"running-and-debugging-generated-code",children:"Running and Debugging Generated Code"}),"\n",(0,o.jsx)(n.p,{children:"First note that you have to ignore the built-in VS Code run and debug menu items, which are not designed to work with CMake.\nThat is, ignore the following menu items:"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Wrong debug menu items",src:t(54231).A+"",width:"300",height:"138"})}),"\n",(0,o.jsx)(n.p,{children:"If you have installed the CMake Tools extension, then you should see its icon in the left sidebar,\nas shown at the lower left here:"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"CMake tools sidebar icon",src:t(68081).A+"",width:"350",height:"490"})}),"\n",(0,o.jsxs)(n.p,{children:["In the Configure menu, select the compiler to use.\nAbove the selection is Clang for an Apple silicon Mac.\nThen, instead of using the menu items to build, run, and debug,\nuse the buttons at the ",(0,o.jsx)(n.em,{children:"bottom"})," of the screen, which look like this:"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"CMake tools build, run, and debug buttons",src:t(52705).A+"",width:"500",height:"126"})}),"\n",(0,o.jsx)(n.p,{children:"The Build button will compile the code.\nTo the right of that button are buttons for debugging and running the code."}),"\n",(0,o.jsx)(n.h2,{id:"debugging-federated-programs",children:"Debugging Federated Programs"}),"\n",(0,o.jsxs)(n.p,{children:["For federated programs, the layout of the generated files is a bit different.\nIf, for example, your federated program is in ",(0,o.jsx)(n.code,{children:"src/Foo.lf"})," and it has a top-level reactor named ",(0,o.jsx)(n.code,{children:"bar"}),",\nthen you will find the generated code for the ",(0,o.jsx)(n.code,{children:"bar"})," federate in ",(0,o.jsx)(n.code,{children:"fed-gen/Foo/src-gen/federate__bar"}),".\nYou can then run and debug that individual federate from within VS Code, but you will also have\nto manually run the RTI and the other federates in order for the code to start executing."]}),"\n",(0,o.jsx)(n.h3,{id:"adding-arguments",children:"Adding Arguments"}),"\n",(0,o.jsxs)(n.p,{children:["To add arguments using VS Code, you should add a directory ",(0,o.jsx)(n.code,{children:".vscode"})," right below the opened ",(0,o.jsx)(n.code,{children:"src-gen"})," directory and add a ",(0,o.jsx)(n.code,{children:"settings.json"})," file like the one below. In place of ",(0,o.jsx)(n.code,{children:"federation_id"}),", write the actual federation ID that is being used by the RTI."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:'{\n    "cmake.debugConfig": {\n        "args": [\n            "-i",\n            "federation_id"\n        ]\n    }\n}\n'})})]})}function g(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>s});var o=t(96540);const d={},r=o.createContext(d);function i(e){const n=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:i(e.components),o.createElement(r.Provider,{value:n},e.children)}},52705:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/cmake-debug-8bdee2b610e1b9b020f52b806efb13a0.png"},54231:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/wrong-debug-7a05aaa89e97c4aa46bbf49369d6f56b.png"},68081:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/cmake-tools-e3fe91c70f366eb12b3e13b1664def7a.png"}}]);